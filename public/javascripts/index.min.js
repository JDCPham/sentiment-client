var icon,callback,sentimentRaw=.343,sentimentCategory="Positive",currency="btc",colour="#444",btcRaw=getBTCSentiment(),ethRaw=getETHSentiment(),xrpRaw=getXRPSentiment(),ltcRaw=getLTCSentiment(),bchRaw=getBCHSentiment(),eosRaw=getEOSSentiment(),iconElement=$("#currency > img"),categoryElement=$("#sentimentCategory > p"),fadeElements=$("#currency > img, #sentimentCategory > p, #indicator, #rawSentiment > p"),indicatorElement=$("#indicator"),sentimentScoreElement=$("#rawSentiment > p");function updateData(e,t){setCategory(e),setColour(e),setIcon(t)}function updateGraphics(e){fadeElements.fadeOut(200,function(){updateIcon(),updateCategory(),updateSentiment(),fadeElements.fadeIn(200)}),updateGraph(e)}$(document).ready(function(){setInterval(function(){indicatorElement.fadeOut(1e3),indicatorElement.fadeIn(300)},1300),setInterval(function(){btcRaw=getBTCSentiment(),ethRaw=getETHSentiment(),xrpRaw=getXRPSentiment(),ltcRaw=getLTCSentiment(),bchRaw=getBCHSentiment(),eosRaw=getEOSSentiment()},6e4),$(".btc").click(function(){updateData(sentimentRaw=btcRaw,currency="btc"),updateGraphics(callback)}),$(".eth").click(function(){updateData(sentimentRaw=ethRaw,currency="eth"),updateGraphics(callback)}),$(".xrp").click(function(){updateData(sentimentRaw=xrpRaw,currency="xrp"),updateGraphics(callback)}),$(".ltc").click(function(){updateData(sentimentRaw=ltcRaw,currency="ltc"),updateGraphics(callback)}),$(".bch").click(function(){updateData(sentimentRaw=bchRaw,currency="bch"),updateGraphics(callback)}),$(".eos").click(function(){updateData(sentimentRaw=eosRaw,currency="eos"),updateGraphics(callback)})});var options={type:"gauge",globals:{fontSize:10},plotarea:{marginTop:40},plot:{size:"100%"},tooltip:{borderRadius:0},scaleR:{aperture:180,minValue:-1,maxValue:1,step:.1,center:{visible:!1},tick:{visible:!1},item:{offsetR:0,angle:"auto"},labels:["-1"],ring:{size:15,rules:[{rule:"%v >= -1 && %v < -0.6",backgroundColor:"#e32d2d"},{rule:"%v >= -0.6 && %v < -0.2",backgroundColor:"#e3702d"},{rule:"%v >= -0.2 && %v < 0.2",backgroundColor:"#edea53"},{rule:"%v >= 0.2 && %v < 0.6",backgroundColor:"#87c949"},{rule:"%v >= 0.6 && %v < 1.0",backgroundColor:"#28992b"}]}},refresh:{type:"feed",transport:"js",url:"update()",interval:1e3},series:[{values:[],backgroundColor:"black",csize:"8%",size:"100%",animation:{effect:2,method:5,sequence:2,speed:4e3}}]};function setCategory(e){sentimentCategory=e>=-1&&e<-.6?"Strongly Negative":e>=-.6&&e<-.2?"Negative":e>=-.2&&e<.2?"Neutral":e>=.2&&e<.6?"Positive":"Strongly Positive"}function setColour(e){colour=e>=-1&&e<-.6?"#e32d2d":e>=-.6&&e<-.2?"#e3702d":e>=-.2&&e<.2?"#edea53":e>=.2&&e<.6?"#87c949":"#28992b"}function setIcon(e){icon="btc"==e?"images/btc.svg":"eth"==e?"images/eth.svg":"xrp"==e?"images/xrp.svg":"ltc"==e?"images/ltc.svg":"bch"==e?"images/bch.svg":"images/eos.svg"}function round(e){return parseFloat(e).toFixed(4)}function updateIcon(){iconElement.attr("src",icon)}function updateCategory(){categoryElement.text(sentimentCategory),categoryElement.css("color",colour),indicatorElement.css("background-color",colour)}function updateSentiment(){sentimentScoreElement.text(round(sentimentRaw)),sentimentScoreElement.css("color",colour)}function updateGraph(e){var t={};t.plot0=sentimentRaw,e(JSON.stringify(t))}function update(e){callback=e}function getBTCSentiment(){axios.get("/sentiment/btc").then(e=>btcRaw=e.data.sentiment)}function getETHSentiment(){axios.get("/sentiment/eth").then(e=>ethRaw=e.data.sentiment)}function getBCHSentiment(){axios.get("/sentiment/bch").then(e=>bchRaw=e.data.sentiment)}function getEOSSentiment(){axios.get("/sentiment/eos").then(e=>eosRaw=e.data.sentiment)}function getLTCSentiment(){axios.get("/sentiment/ltc").then(e=>ltcRaw=e.data.sentiment)}function getXRPSentiment(){axios.get("/sentiment/xrp").then(e=>xrpRaw=e.data.sentiment)}zingchart.render({id:"sentimentGraph",data:options,height:350});